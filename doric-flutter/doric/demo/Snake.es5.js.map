{"version":3,"file":"Snake.es5.js","sources":["../../build/src/Snake.js"],"sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { text, loge, log, ViewHolder, Stack, ViewModel, Gravity, Color, VMPanel, LayoutSpec, vlayout, hlayout, takeNonNull } from \"doric\";\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"left\"] = 0] = \"left\";\n    Direction[Direction[\"right\"] = 1] = \"right\";\n    Direction[Direction[\"up\"] = 2] = \"up\";\n    Direction[Direction[\"down\"] = 3] = \"down\";\n})(Direction || (Direction = {}));\nvar State;\n(function (State) {\n    State[State[\"idel\"] = 0] = \"idel\";\n    State[State[\"run\"] = 1] = \"run\";\n    State[State[\"fail\"] = 2] = \"fail\";\n})(State || (State = {}));\nclass SnakeModel {\n    constructor(w, h) {\n        this.state = State.idel;\n        this.direction = Direction.right;\n        this.food = { x: -1, y: -1 };\n        this.head = {\n            x: 0,\n            y: 0,\n        };\n        this.width = w;\n        this.height = h;\n    }\n    refreshFood() {\n        this.food.x = Math.floor(Math.random() * (this.width - 1));\n        this.food.y = Math.floor(Math.random() * (this.height - 1));\n    }\n    get tail() {\n        let node = this.head;\n        while (node.next !== undefined) {\n            node = node.next;\n        }\n        return node;\n    }\n    get score() {\n        let node = this.head;\n        let n = 0;\n        while (node.next !== undefined) {\n            n++;\n            node = node.next;\n        }\n        return n;\n    }\n    forward(node) {\n        switch (this.direction) {\n            case Direction.left:\n                node.x -= 1;\n                break;\n            case Direction.right:\n                node.x += 1;\n                break;\n            case Direction.up:\n                node.y -= 1;\n                break;\n            case Direction.down:\n                node.y += 1;\n                break;\n        }\n    }\n    step() {\n        if (this.state !== State.run) {\n            return;\n        }\n        let tail = this.tail;\n        while (tail.prev != undefined) {\n            tail.x = tail.prev.x;\n            tail.y = tail.prev.y;\n            tail = tail.prev;\n        }\n        this.forward(this.head);\n        if (this.head.x < 0 || this.head.x >= this.width\n            || this.head.y < 0 || this.head.y >= this.height) {\n            //If out of bound\n            loge('out of bound');\n            this.state = State.fail;\n        }\n        else if (this.head.x == this.food.x && this.head.y == this.food.y) {\n            //If eat food\n            let head = { x: this.food.x, y: this.food.y };\n            log('eat food', head);\n            this.forward(head);\n            this.head.prev = head;\n            head.next = this.head;\n            this.head = head;\n            this.refreshFood();\n        }\n        if (this.crashAtSelf()) {\n            //If crash at self\n            loge('crash at self');\n            this.state = State.fail;\n        }\n    }\n    crashAtSelf() {\n        let cur = this.head.next;\n        while (cur !== undefined) {\n            if (cur.x == this.head.x && cur.y == this.head.y) {\n                return true;\n            }\n            cur = cur.next;\n        }\n        return false;\n    }\n    reset() {\n        this.direction = Direction.right;\n        this.state = State.run;\n        this.head.x = 0;\n        this.head.y = 0;\n        this.head.next = undefined;\n        this.refreshFood();\n    }\n}\nclass SnakeView extends ViewHolder {\n    build(root) {\n        root.backgroundColor = Color.parse('#000000');\n        vlayout([\n            text({\n                text: \"Snake\",\n                textSize: 20,\n                textColor: Color.parse(\"#ffffff\"),\n                layoutConfig: {\n                    alignment: new Gravity().centerX(),\n                    margin: {\n                        top: 20\n                    },\n                    widthSpec: LayoutSpec.FIT,\n                    heightSpec: LayoutSpec.FIT,\n                },\n            }),\n            (new Stack).also(panel => {\n                panel.backgroundColor = Color.parse('#00ff00');\n                this.panel = panel;\n            }),\n            hlayout([\n                text({\n                    text: \"Start\",\n                    textSize: 30,\n                    textColor: Color.parse(\"#ffffff\"),\n                    layoutConfig: {\n                        widthSpec: LayoutSpec.FIT,\n                        heightSpec: LayoutSpec.FIT,\n                    },\n                }).also(it => this.start = it),\n            ]).also(it => {\n                it.layoutConfig = {\n                    widthSpec: LayoutSpec.FIT,\n                    heightSpec: LayoutSpec.FIT,\n                };\n            }),\n            vlayout([\n                hlayout([\n                    text({\n                        width: 50,\n                        height: 50,\n                        text: \"↑\",\n                        textSize: 30,\n                        textAlignment: new Gravity().center(),\n                        backgroundColor: Color.parse('#ffff00'),\n                        layoutConfig: {\n                            widthSpec: LayoutSpec.JUST,\n                            heightSpec: LayoutSpec.JUST,\n                        },\n                    }).also(it => this.up = it)\n                ]).also(it => {\n                    it.layoutConfig = {\n                        widthSpec: LayoutSpec.FIT,\n                        heightSpec: LayoutSpec.FIT,\n                    };\n                }),\n                hlayout([\n                    text({\n                        width: 50,\n                        height: 50,\n                        text: \"←\",\n                        textSize: 30,\n                        textAlignment: new Gravity().center(),\n                        backgroundColor: Color.parse('#ffff00'),\n                        layoutConfig: {\n                            widthSpec: LayoutSpec.JUST,\n                            heightSpec: LayoutSpec.JUST,\n                        },\n                    }).also(it => this.left = it),\n                    text({\n                        width: 50,\n                        height: 50,\n                        text: \"↓\",\n                        textSize: 30,\n                        textAlignment: new Gravity().center(),\n                        backgroundColor: Color.parse('#ffff00'),\n                        layoutConfig: {\n                            widthSpec: LayoutSpec.JUST,\n                            heightSpec: LayoutSpec.JUST,\n                        },\n                    }).also(it => this.down = it),\n                    text({\n                        width: 50,\n                        height: 50,\n                        text: \"→\",\n                        textSize: 30,\n                        textAlignment: new Gravity().center(),\n                        backgroundColor: Color.parse('#ffff00'),\n                        layoutConfig: {\n                            widthSpec: LayoutSpec.JUST,\n                            heightSpec: LayoutSpec.JUST,\n                        },\n                    }).also(it => this.right = it),\n                ]).also(it => {\n                    it.layoutConfig = {\n                        widthSpec: LayoutSpec.FIT,\n                        heightSpec: LayoutSpec.FIT,\n                    };\n                    it.space = 10;\n                }),\n            ]).also(controlArea => {\n                controlArea.gravity = new Gravity().centerX();\n                controlArea.space = 10;\n                controlArea.layoutConfig = {\n                    alignment: new Gravity().centerX(),\n                    widthSpec: LayoutSpec.FIT,\n                    heightSpec: LayoutSpec.FIT,\n                };\n            }),\n        ]).also(it => {\n            it.space = 20;\n            it.layoutConfig = {\n                alignment: new Gravity().centerX().top(),\n                widthSpec: LayoutSpec.MOST,\n                heightSpec: LayoutSpec.MOST,\n            };\n            it.gravity = new Gravity().centerX();\n        }).in(root);\n    }\n    bind(state) {\n        log('build', state);\n        this.panel.width = state.width * 10;\n        this.panel.height = state.height * 10;\n        let node = state.head;\n        let nodes = [];\n        while (node != undefined) {\n            nodes.push(node);\n            node = node.next;\n        }\n        nodes.push(state.food);\n        nodes.forEach((e, index) => {\n            let item = this.panel.children[index];\n            if (item === undefined) {\n                item = new Stack;\n                item.width = item.height = 10;\n                item.corners = 5;\n                item.shadow = {\n                    color: Color.GRAY,\n                    opacity: 1,\n                    radius: 3,\n                    offsetX: 3,\n                    offsetY: 3,\n                };\n                this.panel.addChild(item);\n            }\n            if (index === nodes.length - 1) {\n                item.backgroundColor = Color.parse('#ffff00');\n            }\n            else {\n                item.backgroundColor = Color.parse('#ff0000');\n            }\n            item.x = e.x * 10;\n            item.y = e.y * 10;\n        });\n        if (nodes.length < this.panel.children.length) {\n            this.panel.children.length = nodes.length;\n        }\n    }\n}\nclass SnakeVM extends ViewModel {\n    constructor() {\n        super(...arguments);\n        this.start = () => {\n            if (this.timerId !== undefined) {\n                clearInterval(this.timerId);\n            }\n            this.updateState(it => it.reset());\n            this.timerId = setInterval(() => {\n                this.updateState(it => it.step());\n                if (this.getState().state === State.fail) {\n                    loge('Game Over');\n                    this.stop();\n                }\n            }, 500);\n        };\n        this.stop = () => {\n            if (this.timerId !== undefined) {\n                clearInterval(this.timerId);\n                this.timerId = undefined;\n            }\n        };\n        this.left = () => {\n            this.updateState(it => it.direction = Direction.left);\n        };\n        this.right = () => {\n            this.updateState(it => it.direction = Direction.right);\n        };\n        this.up = () => {\n            this.updateState(it => it.direction = Direction.up);\n        };\n        this.down = () => {\n            this.updateState(it => it.direction = Direction.down);\n        };\n    }\n    onAttached(state, v) {\n        takeNonNull(v.start)(it => it.onClick = this.start);\n        takeNonNull(v.left)(it => it.onClick = this.left);\n        takeNonNull(v.right)(it => it.onClick = this.right);\n        takeNonNull(v.up)(it => it.onClick = this.up);\n        takeNonNull(v.down)(it => it.onClick = this.down);\n    }\n    onBind(state, v) {\n        v.bind(state);\n    }\n}\nlet SnakePanel = class SnakePanel extends VMPanel {\n    getViewModelClass() {\n        return SnakeVM;\n    }\n    getState() {\n        return new SnakeModel(35, 35);\n    }\n    getViewHolderClass() {\n        return SnakeView;\n    }\n};\nSnakePanel = __decorate([\n    Entry\n], SnakePanel);\n//# sourceMappingURL=Snake.js.map"],"names":["this","let","loge","log","Color","vlayout","text","Gravity","LayoutSpec","Stack","hlayout","ViewHolder","super","takeNonNull","ViewModel"],"mappings":";;;;AAAA,IAAI,UAAU,GAAG,CAACA,SAAI,IAAIA,SAAI,CAAC,UAAU,KAAK,UAAU,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;AACvF,IAAI,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,IAAI,KAAK,IAAI,GAAG,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC;AACjI,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,UAAU,IAAE,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,GAAC;AACnI,WAAS,KAAK,IAAI,CAAC,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,IAAE,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,IAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,OAAC;AACtJ,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;AAClE,CAAC,CAAC;AAEF,IAAI,SAAS,CAAC;AACd,CAAC,UAAU,SAAS,EAAE;AACtB,IAAI,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AAC9C,IAAI,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;AAChD,IAAI,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;AAC1C,IAAI,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AAC9C,CAAC,EAAE,SAAS,KAAK,SAAS,GAAG,EAAE,CAAC,CAAC,CAAC;AAClC,IAAI,KAAK,CAAC;AACV,CAAC,UAAU,KAAK,EAAE;AAClB,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AACtC,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;AACpC,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AACtC,CAAC,EAAE,KAAK,KAAK,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC;AAC1B,IAAM,UAAU,GACZ,mBAAW,CAAC,CAAC,EAAE,CAAC,EAAE;AACtB,IAAQ,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;AAChC,IAAQ,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC;AACzC,IAAQ,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;AACrC,IAAQ,IAAI,CAAC,IAAI,GAAG;AACpB,QAAY,CAAC,EAAE,CAAC;AAChB,QAAY,CAAC,EAAE,CAAC;AAChB,KAAS,CAAC;AACV,IAAQ,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACvB,IAAQ,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AACpB;;wFAAC;qBACD,sCAAc;AAClB,IAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;AACnE,IAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;AAChE,EAAC;AACD,mBAAI,uBAAO;AACf,IAAQC,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAC7B,IAAQ,OAAO,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;AACxC,QAAY,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAC7B,KAAS;AACT,IAAQ,OAAO,IAAI,CAAC;AAChB,EAAC;AACD,mBAAI,wBAAQ;AAChB,IAAQA,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAC7B,IAAQA,IAAI,CAAC,GAAG,CAAC,CAAC;AAClB,IAAQ,OAAO,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;AACxC,QAAY,CAAC,EAAE,CAAC;AAChB,QAAY,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAC7B,KAAS;AACT,IAAQ,OAAO,CAAC,CAAC;AACb,EAAC;qBACD,4BAAQ,IAAI,EAAE;AAClB,IAAQ,QAAQ,IAAI,CAAC,SAAS;AAC9B,QAAY,KAAK,SAAS,CAAC,IAAI;AAC/B,YAAgB,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;AAC5B,YAAgB,MAAM;AACtB,QAAY,KAAK,SAAS,CAAC,KAAK;AAChC,YAAgB,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;AAC5B,YAAgB,MAAM;AACtB,QAAY,KAAK,SAAS,CAAC,EAAE;AAC7B,YAAgB,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;AAC5B,YAAgB,MAAM;AACtB,QAAY,KAAK,SAAS,CAAC,IAAI;AAC/B,YAAgB,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC;AAC5B,YAAgB,MAAM;AACtB,KAAS;AACL,EAAC;qBACD,wBAAO;AACX,IAAQ,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,GAAG,EAAE;AACtC,QAAY,OAAO;AACnB,KAAS;AACT,IAAQA,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAC7B,IAAQ,OAAO,IAAI,CAAC,IAAI,IAAI,SAAS,EAAE;AACvC,QAAY,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACjC,QAAY,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACjC,QAAY,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAC7B,KAAS;AACT,IAAQ,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChC,IAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK;AACxD,WAAe,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;AAC9D;AACA,QAAYC,UAAI,CAAC,cAAc,CAAC,CAAC;AACjC,QAAY,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;AACpC,KAAS;AACT,SAAa,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;AAC3E;AACA,QAAYD,IAAI,IAAI,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAC1D,QAAYE,SAAG,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAClC,QAAY,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC/B,QAAY,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAClC,QAAY,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAClC,QAAY,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AAC7B,QAAY,IAAI,CAAC,WAAW,EAAE,CAAC;AAC/B,KAAS;AACT,IAAQ,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;AAChC;AACA,QAAYD,UAAI,CAAC,eAAe,CAAC,CAAC;AAClC,QAAY,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;AACpC,KAAS;AACL,EAAC;qBACD,sCAAc;AAClB,IAAQD,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;AACjC,IAAQ,OAAO,GAAG,KAAK,SAAS,EAAE;AAClC,QAAY,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;AAC9D,YAAgB,OAAO,IAAI,CAAC;AAC5B,SAAa;AACb,QAAY,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;AAC3B,KAAS;AACT,IAAQ,OAAO,KAAK,CAAC;AACjB,EAAC;qBACD,0BAAQ;AACZ,IAAQ,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC;AACzC,IAAQ,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC;AAC/B,IAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACxB,IAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACxB,IAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;AACnC,IAAQ,IAAI,CAAC,WAAW,EAAE,CAAC;AACvB;;oEACH;AACD,IAAM,SAAS;;;;;;;;;wBACX,wBAAM,IAAI,EAAE;;AAAC;AACjB,QAAQ,IAAI,CAAC,eAAe,GAAGG,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AACtD,QAAQC,aAAO,CAAC;AAChB,YAAYC,UAAI,CAAC;AACjB,gBAAgB,IAAI,EAAE,OAAO;AAC7B,gBAAgB,QAAQ,EAAE,EAAE;AAC5B,gBAAgB,SAAS,EAAEF,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC;AACjD,gBAAgB,YAAY,EAAE;AAC9B,oBAAoB,SAAS,EAAE,IAAIG,aAAO,EAAE,CAAC,OAAO,EAAE;AACtD,oBAAoB,MAAM,EAAE;AAC5B,wBAAwB,GAAG,EAAE,EAAE;AAC/B,qBAAqB;AACrB,oBAAoB,SAAS,EAAEC,gBAAU,CAAC,GAAG;AAC7C,oBAAoB,UAAU,EAAEA,gBAAU,CAAC,GAAG;AAC9C,iBAAiB;AACjB,aAAa,CAAC;AACd,YAAY,CAAC,IAAIC,WAAK,EAAE,IAAI,WAAC,OAAS;AACtC,gBAAgB,KAAK,CAAC,eAAe,GAAGL,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AAC/D,gBAAgBJ,MAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnC,aAAa,CAAC;AACd,YAAYU,aAAO,CAAC;AACpB,gBAAgBJ,UAAI,CAAC;AACrB,oBAAoB,IAAI,EAAE,OAAO;AACjC,oBAAoB,QAAQ,EAAE,EAAE;AAChC,oBAAoB,SAAS,EAAEF,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC;AACrD,oBAAoB,YAAY,EAAE;AAClC,wBAAwB,SAAS,EAAEI,gBAAU,CAAC,GAAG;AACjD,wBAAwB,UAAU,EAAEA,gBAAU,CAAC,GAAG;AAClD,qBAAqB;AACrB,iBAAiB,CAAC,CAAC,IAAI,WAAC,aAAMR,MAAI,CAAC,KAAK,GAAG,KAAE,CAAC,EACjC,CAAC,CAAC,IAAI,WAAC,IAAM;AAC1B,gBAAgB,EAAE,CAAC,YAAY,GAAG;AAClC,oBAAoB,SAAS,EAAEQ,gBAAU,CAAC,GAAG;AAC7C,oBAAoB,UAAU,EAAEA,gBAAU,CAAC,GAAG;AAC9C,iBAAiB,CAAC;AAClB,aAAa,CAAC;AACd,YAAYH,aAAO,CAAC;AACpB,gBAAgBK,aAAO,CAAC;AACxB,oBAAoBJ,UAAI,CAAC;AACzB,wBAAwB,KAAK,EAAE,EAAE;AACjC,wBAAwB,MAAM,EAAE,EAAE;AAClC,wBAAwB,IAAI,EAAE,GAAG;AACjC,wBAAwB,QAAQ,EAAE,EAAE;AACpC,wBAAwB,aAAa,EAAE,IAAIC,aAAO,EAAE,CAAC,MAAM,EAAE;AAC7D,wBAAwB,eAAe,EAAEH,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC;AAC/D,wBAAwB,YAAY,EAAE;AACtC,4BAA4B,SAAS,EAAEI,gBAAU,CAAC,IAAI;AACtD,4BAA4B,UAAU,EAAEA,gBAAU,CAAC,IAAI;AACvD,yBAAyB;AACzB,qBAAqB,CAAC,CAAC,IAAI,WAAC,aAAMR,MAAI,CAAC,EAAE,GAAG,KAAE,CAAC;AAC/C,iBAAiB,CAAC,CAAC,IAAI,WAAC,IAAM;AAC9B,oBAAoB,EAAE,CAAC,YAAY,GAAG;AACtC,wBAAwB,SAAS,EAAEQ,gBAAU,CAAC,GAAG;AACjD,wBAAwB,UAAU,EAAEA,gBAAU,CAAC,GAAG;AAClD,qBAAqB,CAAC;AACtB,iBAAiB,CAAC;AAClB,gBAAgBE,aAAO,CAAC;AACxB,oBAAoBJ,UAAI,CAAC;AACzB,wBAAwB,KAAK,EAAE,EAAE;AACjC,wBAAwB,MAAM,EAAE,EAAE;AAClC,wBAAwB,IAAI,EAAE,GAAG;AACjC,wBAAwB,QAAQ,EAAE,EAAE;AACpC,wBAAwB,aAAa,EAAE,IAAIC,aAAO,EAAE,CAAC,MAAM,EAAE;AAC7D,wBAAwB,eAAe,EAAEH,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC;AAC/D,wBAAwB,YAAY,EAAE;AACtC,4BAA4B,SAAS,EAAEI,gBAAU,CAAC,IAAI;AACtD,4BAA4B,UAAU,EAAEA,gBAAU,CAAC,IAAI;AACvD,yBAAyB;AACzB,qBAAqB,CAAC,CAAC,IAAI,WAAC,aAAMR,MAAI,CAAC,IAAI,GAAG,KAAE,CAAC;AACjD,oBAAoBM,UAAI,CAAC;AACzB,wBAAwB,KAAK,EAAE,EAAE;AACjC,wBAAwB,MAAM,EAAE,EAAE;AAClC,wBAAwB,IAAI,EAAE,GAAG;AACjC,wBAAwB,QAAQ,EAAE,EAAE;AACpC,wBAAwB,aAAa,EAAE,IAAIC,aAAO,EAAE,CAAC,MAAM,EAAE;AAC7D,wBAAwB,eAAe,EAAEH,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC;AAC/D,wBAAwB,YAAY,EAAE;AACtC,4BAA4B,SAAS,EAAEI,gBAAU,CAAC,IAAI;AACtD,4BAA4B,UAAU,EAAEA,gBAAU,CAAC,IAAI;AACvD,yBAAyB;AACzB,qBAAqB,CAAC,CAAC,IAAI,WAAC,aAAMR,MAAI,CAAC,IAAI,GAAG,KAAE,CAAC;AACjD,oBAAoBM,UAAI,CAAC;AACzB,wBAAwB,KAAK,EAAE,EAAE;AACjC,wBAAwB,MAAM,EAAE,EAAE;AAClC,wBAAwB,IAAI,EAAE,GAAG;AACjC,wBAAwB,QAAQ,EAAE,EAAE;AACpC,wBAAwB,aAAa,EAAE,IAAIC,aAAO,EAAE,CAAC,MAAM,EAAE;AAC7D,wBAAwB,eAAe,EAAEH,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC;AAC/D,wBAAwB,YAAY,EAAE;AACtC,4BAA4B,SAAS,EAAEI,gBAAU,CAAC,IAAI;AACtD,4BAA4B,UAAU,EAAEA,gBAAU,CAAC,IAAI;AACvD,yBAAyB;AACzB,qBAAqB,CAAC,CAAC,IAAI,WAAC,aAAMR,MAAI,CAAC,KAAK,GAAG,KAAE,CAAC,EACjC,CAAC,CAAC,IAAI,WAAC,IAAM;AAC9B,oBAAoB,EAAE,CAAC,YAAY,GAAG;AACtC,wBAAwB,SAAS,EAAEQ,gBAAU,CAAC,GAAG;AACjD,wBAAwB,UAAU,EAAEA,gBAAU,CAAC,GAAG;AAClD,qBAAqB,CAAC;AACtB,oBAAoB,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC;AAClC,iBAAiB,CAAC,EACL,CAAC,CAAC,IAAI,WAAC,aAAe;AACnC,gBAAgB,WAAW,CAAC,OAAO,GAAG,IAAID,aAAO,EAAE,CAAC,OAAO,EAAE,CAAC;AAC9D,gBAAgB,WAAW,CAAC,KAAK,GAAG,EAAE,CAAC;AACvC,gBAAgB,WAAW,CAAC,YAAY,GAAG;AAC3C,oBAAoB,SAAS,EAAE,IAAIA,aAAO,EAAE,CAAC,OAAO,EAAE;AACtD,oBAAoB,SAAS,EAAEC,gBAAU,CAAC,GAAG;AAC7C,oBAAoB,UAAU,EAAEA,gBAAU,CAAC,GAAG;AAC9C,iBAAiB,CAAC;AAClB,aAAa,CAAC,EACL,CAAC,CAAC,IAAI,WAAC,IAAM;AACtB,YAAY,EAAE,CAAC,KAAK,GAAG,EAAE,CAAC;AAC1B,YAAY,EAAE,CAAC,YAAY,GAAG;AAC9B,gBAAgB,SAAS,EAAE,IAAID,aAAO,EAAE,CAAC,OAAO,EAAE,CAAC,GAAG,EAAE;AACxD,gBAAgB,SAAS,EAAEC,gBAAU,CAAC,IAAI;AAC1C,gBAAgB,UAAU,EAAEA,gBAAU,CAAC,IAAI;AAC3C,aAAa,CAAC;AACd,YAAY,EAAE,CAAC,OAAO,GAAG,IAAID,aAAO,EAAE,CAAC,OAAO,EAAE,CAAC;AACjD,SAAS,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACpB,MAAK;AACL,wBAAI,sBAAK,KAAK,EAAE;;AAAC;AACjB,QAAQJ,SAAG,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AAC5B,QAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;AAC5C,QAAQ,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;AAC9C,QAAQF,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;AAC9B,QAAQA,IAAI,KAAK,GAAG,EAAE,CAAC;AACvB,QAAQ,OAAO,IAAI,IAAI,SAAS,EAAE;AAClC,YAAY,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC7B,YAAY,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AAC7B,SAAS;AACT,QAAQ,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC/B,QAAQ,KAAK,CAAC,OAAO,WAAE,CAAC,EAAE,KAAK,EAAK;AACpC,YAAYA,IAAI,IAAI,GAAGD,MAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAClD,YAAY,IAAI,IAAI,KAAK,SAAS,EAAE;AACpC,gBAAgB,IAAI,GAAG,IAAIS,WAAK,CAAC;AACjC,gBAAgB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AAC9C,gBAAgB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;AACjC,gBAAgB,IAAI,CAAC,MAAM,GAAG;AAC9B,oBAAoB,KAAK,EAAEL,WAAK,CAAC,IAAI;AACrC,oBAAoB,OAAO,EAAE,CAAC;AAC9B,oBAAoB,MAAM,EAAE,CAAC;AAC7B,oBAAoB,OAAO,EAAE,CAAC;AAC9B,oBAAoB,OAAO,EAAE,CAAC;AAC9B,iBAAiB,CAAC;AAClB,gBAAgBJ,MAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AAC1C,aAAa;AACb,YAAY,IAAI,KAAK,KAAK,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AAC5C,gBAAgB,IAAI,CAAC,eAAe,GAAGI,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AAC9D,aAAa;AACb,iBAAiB;AACjB,gBAAgB,IAAI,CAAC,eAAe,GAAGA,WAAK,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AAC9D,aAAa;AACb,YAAY,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AAC9B,YAAY,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;AAC9B,SAAS,CAAC,CAAC;AACX,QAAQ,IAAI,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE;AACvD,YAAY,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;AACtD,SAAS;AACT;;;EA9JwBO,mBA+JvB;AACD,IAAM,OAAO;IACT,gBAAW,GAAG;;AAAC;AACnB,QAAQC,eAAK,OAAI,SAAS,CAAC,CAAC;AAC5B,QAAQ,IAAI,CAAC,KAAK,eAAS;AAC3B,YAAY,IAAIZ,MAAI,CAAC,OAAO,KAAK,SAAS,EAAE;AAC5C,gBAAgB,aAAa,CAACA,MAAI,CAAC,OAAO,CAAC,CAAC;AAC5C,aAAa;AACb,YAAYA,MAAI,CAAC,WAAW,WAAC,aAAM,EAAE,CAAC,KAAK,KAAE,CAAC,CAAC;AAC/C,YAAYA,MAAI,CAAC,OAAO,GAAG,WAAW,aAAO;AAC7C,gBAAgBA,MAAI,CAAC,WAAW,WAAC,aAAM,EAAE,CAAC,IAAI,KAAE,CAAC,CAAC;AAClD,gBAAgB,IAAIA,MAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,EAAE;AAC1D,oBAAoBE,UAAI,CAAC,WAAW,CAAC,CAAC;AACtC,oBAAoBF,MAAI,CAAC,IAAI,EAAE,CAAC;AAChC,iBAAiB;AACjB,aAAa,EAAE,GAAG,CAAC,CAAC;AACpB,SAAS,CAAC;AACV,QAAQ,IAAI,CAAC,IAAI,eAAS;AAC1B,YAAY,IAAIA,MAAI,CAAC,OAAO,KAAK,SAAS,EAAE;AAC5C,gBAAgB,aAAa,CAACA,MAAI,CAAC,OAAO,CAAC,CAAC;AAC5C,gBAAgBA,MAAI,CAAC,OAAO,GAAG,SAAS,CAAC;AACzC,aAAa;AACb,SAAS,CAAC;AACV,QAAQ,IAAI,CAAC,IAAI,eAAS;AAC1B,YAAYA,MAAI,CAAC,WAAW,WAAC,aAAM,EAAE,CAAC,SAAS,GAAG,SAAS,CAAC,OAAI,CAAC,CAAC;AAClE,SAAS,CAAC;AACV,QAAQ,IAAI,CAAC,KAAK,eAAS;AAC3B,YAAYA,MAAI,CAAC,WAAW,WAAC,aAAM,EAAE,CAAC,SAAS,GAAG,SAAS,CAAC,QAAK,CAAC,CAAC;AACnE,SAAS,CAAC;AACV,QAAQ,IAAI,CAAC,EAAE,eAAS;AACxB,YAAYA,MAAI,CAAC,WAAW,WAAC,aAAM,EAAE,CAAC,SAAS,GAAG,SAAS,CAAC,KAAE,CAAC,CAAC;AAChE,SAAS,CAAC;AACV,QAAQ,IAAI,CAAC,IAAI,eAAS;AAC1B,YAAYA,MAAI,CAAC,WAAW,WAAC,aAAM,EAAE,CAAC,SAAS,GAAG,SAAS,CAAC,OAAI,CAAC,CAAC;AAClE,SAAS,CAAC;AACV;;;;4CAAK;AACL,sBAAI,kCAAW,KAAK,EAAE,CAAC,EAAE;;AAAC;AAC1B,QAAQa,iBAAW,CAAC,CAAC,CAAC,KAAK,CAAC,WAAC,aAAM,EAAE,CAAC,OAAO,GAAGb,MAAI,CAAC,QAAK,CAAC,CAAC;AAC5D,QAAQa,iBAAW,CAAC,CAAC,CAAC,IAAI,CAAC,WAAC,aAAM,EAAE,CAAC,OAAO,GAAGb,MAAI,CAAC,OAAI,CAAC,CAAC;AAC1D,QAAQa,iBAAW,CAAC,CAAC,CAAC,KAAK,CAAC,WAAC,aAAM,EAAE,CAAC,OAAO,GAAGb,MAAI,CAAC,QAAK,CAAC,CAAC;AAC5D,QAAQa,iBAAW,CAAC,CAAC,CAAC,EAAE,CAAC,WAAC,aAAM,EAAE,CAAC,OAAO,GAAGb,MAAI,CAAC,KAAE,CAAC,CAAC;AACtD,QAAQa,iBAAW,CAAC,CAAC,CAAC,IAAI,CAAC,WAAC,aAAM,EAAE,CAAC,OAAO,GAAGb,MAAI,CAAC,OAAI,CAAC,CAAC;AAC1D,MAAK;AACL,sBAAI,0BAAO,KAAK,EAAE,CAAC,EAAE;AACrB,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACtB;;;EA5CsBc,kBA6CrB;AACDb,IAAI,UAAU;;;;;;;;;yBACV,kDAAoB;AACxB,QAAQ,OAAO,OAAO,CAAC;AACvB,MAAK;AACL,yBAAI,gCAAW;AACf,QAAQ,OAAO,IAAI,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACtC,MAAK;AACL,yBAAI,oDAAqB;AACzB,QAAQ,OAAO,SAAS,CAAC;AACzB;;;iBACC,CAAC;AACF,UAAU,GAAG,UAAU,CAAC;AACxB,IAAI,KAAK;AACT,CAAC,EAAE,UAAU,CAAC"}